<div class="face-swap-container">
    <!-- Upload Zone -->
    @if (!previewUrl()) {
    <div class="upload-zone" (drop)="onDrop($event)" (dragover)="onDragOver($event)">
        <input type="file" id="file-input" accept="image/*" (change)="onFileSelected($event)" hidden />
        <label for="file-input" class="upload-label">
            <svg class="upload-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
            </svg>
            <p class="text-[13px]">
                Clique pour tÃ©lÃ©charger une photo de toi
            </p>
        </label>
    </div>
    }

    <!-- Preview Zone -->
    @if (previewUrl() && !resultImageUrl()) {
    <div class="preview-zone">
        <img [src]="previewUrl()" alt="Preview" class="preview-image" />

        <div class="action-buttons">
            <button class="btn btn-primary" (click)="submitFaceSwap()" [disabled]="isLoading()">
                @if (isLoading()) {
                <span class="spinner"></span>
                <span>Traitement en cours...</span>
                } @else {
                <span>ðŸŽ­ Swap le visage</span>
                }
            </button>
            <button class="btn btn-secondary" (click)="reset()" [disabled]="isLoading()">
                Recommencer
            </button>
        </div>

        @if (result()) {
        <div class="status-info">
            <span class="status-badge" [class]="'status-' + result()!.status.toLowerCase()">
                {{ result()!.status }}
            </span>
        </div>
        }
    </div>
    }

    <!-- Result Zone -->
    @if (resultImageUrl()) {
    <div class="result-zone">
        <h3 class="result-title">âœ¨ RÃ©sultat</h3>
        <img [src]="resultImageUrl()" alt="Result" class="result-image" />

        <div class="action-buttons">
            <a [href]="resultImageUrl()" download="face-swap-result.jpg" class="btn btn-primary">
                ðŸ“¥ TÃ©lÃ©charger
            </a>
            <button class="btn btn-secondary" (click)="reset()">
                Nouvelle image
            </button>
        </div>
    </div>
    }

    <!-- Error Display -->
    @if (error()) {
    <div class="error-message">
        <svg class="error-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        {{ error() }}
    </div>
    }
</div>